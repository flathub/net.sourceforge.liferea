{
    "app-id": "net.sourceforge.liferea",
    "runtime": "org.gnome.Platform",
    "runtime-version": "44",
    "sdk": "org.gnome.Sdk",
    "command": "liferea",
    "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/share/pkgconfig",
        "/share/aclocal",
        "/man",
        "/share/man",
        "*.la",
        "*.a"
    ],
    "finish-args": [
        "--device=dri",
        "--filesystem=xdg-download",
        "--share=ipc",
        "--share=network",
        "--socket=pulseaudio",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--talk-name=org.freedesktop.Notifications",
        "--talk-name=org.freedesktop.secrets"
    ],
    "modules": [
        "shared-modules/intltool/intltool-0.51.json",
        "shared-modules/libsoup/libsoup-2.4.json",
        {
            "name": "libpeas",
            "buildsystem": "meson",
            "cleanup": [
                "/bin/*",
                "/lib/peas-demo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/libpeas/2.0/libpeas-2.0.0.tar.xz",
                    "sha256": "5407acbc0c12f790f70c9d2b98224acc1be3ac449c60603b8192ca020b497011",
                    "x-checker-data": {
                        "type": "gnome",
                        "name": "libpeas"
                    }
                }
            ]
        },
        {
            "name": "git",
            "make-args": [
                "NO_TCLTK=1",
                "INSTALL_SYMLINKS=1"
            ],
            "make-install-args": [
                "NO_TCLTK=1",
                "INSTALL_SYMLINKS=1"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.42.0.tar.xz",
                    "sha256": "3278210e9fd2994b8484dd7e3ddd9ea8b940ef52170cdb606daa94d887c93b0d",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 5350,
                        "stable-only": true,
                        "url-template": "https://mirrors.edge.kernel.org/pub/software/scm/git/git-$version.tar.xz"
                    }
                }
            ]
        },
        {
            "name": "aria2",
            "config-opts": [
                "--enable-libaria2",
                "--with-ca-bundle=/etc/ssl/certs/ca-certificates.crt"
            ],
            "sources": [
                {
                    "type": "archive",
                    "sha256": "58d1e7608c12404f0229a3d9a4953d0d00c18040504498b483305bcb3de907a5",
                    "url": "https://github.com/aria2/aria2/releases/download/release-1.36.0/aria2-1.36.0.tar.xz",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 109,
                        "url-template": "https://github.com/aria2/aria2/releases/download/release-$version/aria2-$version.tar.xz"
                    }
                }
            ]
        },
        {
            "name": "unifdef",
            "no-autogen": true,
            "make-install-args": [
                "prefix=${FLATPAK_DEST}"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://dotat.at/prog/unifdef/unifdef-2.12.tar.xz",
                    "sha256": "43ce0f02ecdcdc723b2475575563ddb192e988c886d368260bc0a63aee3ac400"
                }
            ],
            "cleanup": [
                "*"
            ]
        },
        {
            "name": "libjxl",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
                "-DBUILD_TESTING=OFF"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/libjxl/libjxl.git",
                    "tag": "v0.8.2",
                    "commit": "954b460768c08a147abf47689ad69b0e7beff65e",
                    "disable-shallow-clone": true,
                    "x-checker-data": {
                        "type": "git",
                        "tag-pattern": "^v([\\d.]+)$"
                    }
                }
            ]
        },
        {
            "name": "webkit2gtk-4.0",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
                "-DPORT=GTK",
                "-DENABLE_BUBBLEWRAP_SANDBOX=OFF",
                "-DENABLE_DOCUMENTATION=OFF",
                "-DUSE_SOUP2=ON",
                "-DENABLE_MINIBROWSER=OFF",
                "-DENABLE_WEBDRIVER=OFF",
                "-DENABLE_GAMEPAD=OFF"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://webkitgtk.org/releases/webkitgtk-2.42.0.tar.xz",
                    "sha256": "828f95935861fae583fb8f2ae58cf64c63c178ae2b7c2d6f73070813ad64ed1b",
                    "x-checker-data": {
                        "type": "html",
                        "url": "https://webkitgtk.org/releases/",
                        "version-pattern": "LATEST-STABLE-(\\d[\\.\\d]+\\d)",
                        "url-template": "https://webkitgtk.org/releases/webkitgtk-$version.tar.xz"
                    }
                }
            ]
        },
        {
            "name": "liferea",
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/lwindolf/liferea.git",
                    "tag": "v1.14.6",
                    "commit": "b394b0f4806f5c47e7a156e2bf40b2d670a7ee21"
                },
                {
                    "type": "patch",
                    "path": "patches/appdata.patch"
                },
                {
                    "type": "patch",
                    "path": "patches/download.patch"
                }
            ]
        }
    ]
}
